//plagiarism prices block in viewport
if ('IntersectionObserver' in window && (document.querySelector('.block--plagiarism_prices .price-box-wrapper') || document.querySelector('.block--plagiarism_2021_prices #prices'))) {
  let priceBlock = '';
  if(document.querySelector('.block--plagiarism_prices .price-box-wrapper')) {
    priceBlock = document.querySelector('.block--plagiarism_prices .price-box-wrapper');
  } else {
    priceBlock = document.querySelector('.block--plagiarism_2021_prices #prices');
  }
  
  let priceViewed = false;
  let observer = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.intersectionRatio >= 0.10 && priceViewed == false) {
        //timeout 2 seconds
        setTimeout(function () {
          priceViewed = true;
          marketing.trackEvent('Price Viewed').sendToAmplitude();  // send to amplitude
          // stop listening for this element
          observer.unobserve(entry.target);
        }, 2000);
      }
    });
  }, { threshold: 1 });
  observer.observe(priceBlock);
}

//header buttons clicked
let headerButtons = document.querySelectorAll(`header.page-header a.btn`);
headerButtons.forEach(function(elem, index){
  elem.addEventListener('click', function(){
    
    var linkURL = elem.getAttribute('href').split('?')[0],
          buttonText = elem.innerText;
      let eventProperties = {
        "destination_url": linkURL,
        "location_url": ampliCurrentURL,
        "button_text": buttonText
      };
    if(index == '0') {
      marketing.trackEvent('Primary Button Clicked', eventProperties).sendToAmplitude(); // send to amplitude
    } else {
      marketing.trackEvent('Secondary Button Clicked', eventProperties).sendToAmplitude();  // send to amplitude
    }
    
  })
});